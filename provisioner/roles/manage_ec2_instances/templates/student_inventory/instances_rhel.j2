[all:vars]
ansible_user=student{{ item }}
ansible_ssh_pass={{ admin_password }}
{% if ssh_port is defined %}
ansible_port={{ ssh_port }}
{% endif %}

[web]
{% for vm in node1_node_facts.instances %}
{% if 'student' + item == vm.tags.Student %}
{{ vm.tags.short_name }} ansible_host={{ vm.private_ip_address }}
{% endif %}
{% endfor %}
{% for vm in node2_node_facts.instances %}
{% if 'student' + item == vm.tags.Student %}
{{ vm.tags.short_name }} ansible_host={{ vm.private_ip_address }}
{% endif %}
{% endfor %}
{% for vm in node3_node_facts.instances %}
{% if 'student' + item == vm.tags.Student %}
{{ vm.tags.short_name }} ansible_host={{ vm.private_ip_address }}
{% endif %}
{% endfor %}


{% if centos6 is defined %}
[centos6_web]
{% for vm in node6_node_facts.instances %}
{% if 'student' + item == vm.tags.Student %}
{{ vm.tags.short_name }} ansible_host={{ vm.private_ip_address }}
{% endif %}
{% endfor %}
{% for vm in node7_node_facts.instances %}
{% if 'student' + item == vm.tags.Student %}
{{ vm.tags.short_name }} ansible_host={{ vm.private_ip_address }}
{% endif %}
{% endfor %}
{% endif %}

{% if centos7 is defined %}
[centos7_web]
{% for vm in node4_node_facts.instances %}
{% if 'student' + item == vm.tags.Student %}
{{ vm.tags.short_name }} ansible_host={{ vm.private_ip_address }}
{% endif %}
{% endfor %}
{% for vm in node5_node_facts.instances %}
{% if 'student' + item == vm.tags.Student %}
{{ vm.tags.short_name }} ansible_host={{ vm.private_ip_address }}
{% endif %}
{% endfor %}
{% endif %}

[control]
{% for vm in ansible_node_facts.instances %}
{% if 'student' + item == vm.tags.Student %}
{{ vm.tags.short_name }} ansible_host={{ vm.private_ip_address }}
{% endif %}
{% endfor %}
